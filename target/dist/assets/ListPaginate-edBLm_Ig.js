import{d as C}from"./dom-BVfCmWpy.js";import S from"./ClassicLoading-Bf3Fy18F.js";import{d as f,_ as m,o as s,c as o,f as n,t as u,F as d,b as g,z as c,E as z,m as k,H as R,s as F,r as P,g as M,h as b,i as h,e as y,B as _,G as L,y as T,A as B}from"./index.js";const N=f({name:"PaginateParams",props:{rowsPerPage:{default:0,type:Number}},emits:["update:rowsPerPage"],data(){return{optionsRowsPerPage:[10,20,30,40,50,60]}},created(){this.initRowsPerPage()},methods:{initRowsPerPage(){this.optionsRowsPerPage.includes(this.rowsPerPage)||(this.optionsRowsPerPage.push(this.rowsPerPage),this.optionsRowsPerPage.sort((e,i)=>e-i))}}}),j={class:"paginate"},E={class:"d-flex align-items-center justify-content-center"},G={for:"rows-per-page-select"},W=["value"],H=["value"];function U(e,i,r,a,l,p){return s(),o("div",j,[n("div",E,[n("label",G,u(e.$t("Items per page :")),1),n("select",{id:"rows-per-page-select",value:e.rowsPerPage,class:"c-hand p-1 mx-2",onChange:i[0]||(i[0]=t=>e.$emit("update:rowsPerPage",parseInt(t.target.value,10)))},[(s(!0),o(d,null,g(e.optionsRowsPerPage,t=>(s(),o("option",{key:t,value:t},u(t),9,H))),128))],40,W)])])}const V=m(N,[["render",U]]),A=f({name:"PaginateSection",props:{totalCount:{default:0,type:Number},first:{default:0,type:Number},rowsPerPage:{default:0,type:Number},rangeSize:{default:1,type:Number}},emits:["update:first"],computed:{buttonsLeft(){return[{title:this.$t("Go to first page"),disabled:this.first===0,action:()=>{this.changeFirst(0)},path:"M11.854 3.646a.5.5 0 0 1 0 .708L8.207 8l3.647 3.646a.5.5 0 0 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 0 1 .708 0zM4.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 1 0v-13a.5.5 0 0 0-.5-.5z"},{title:this.$t("Go to previous page"),disabled:this.first===0,action:()=>{this.changeFirst(this.first-this.rowsPerPage)},path:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}]},buttonsRight(){return[{title:this.$t("Go to next page"),disabled:this.lastFirst===this.first,action:()=>{this.changeFirst(this.first+this.rowsPerPage)},path:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"},{title:this.$t("Go to last page"),disabled:this.lastFirst===this.first,action:()=>{this.changeFirst(this.lastFirst)},path:"M4.146 3.646a.5.5 0 0 0 0 .708L7.793 8l-3.647 3.646a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708 0zM11.5 1a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-1 0v-13a.5.5 0 0 1 .5-.5z"}]},page(){return Math.floor(this.first/this.rowsPerPage)},totalPage(){return Math.ceil(this.totalCount/this.rowsPerPage)},pagination(){if(this.rangeSize===-1)return[];const e=5+this.rangeSize*2;let i=this.totalPage<=e?1:this.page+1-this.rangeSize,r=this.totalPage<=e?this.totalPage:this.page+1+this.rangeSize;if(r=r>this.totalPage?this.totalPage:r,i=i<1?1:i,this.totalPage>e)return this.getPaginationArrayWithEllipsis(i,r,e);const a=[];for(let l=i;l<=r;l++)a.push(l);return a},lastFirst(){return(this.totalPage-1)*this.rowsPerPage}},methods:{getPaginationArrayWithEllipsis(e,i,r){const a=[],l=e-1<3,p=this.totalPage-i<3;if(l){i=r-2;for(let t=1;t<e;t++)a.push(t)}else a.push(1),a.push(null);if(p){e=this.totalPage-(r-3);for(let t=e;t<=this.totalPage;t++)a.push(t)}else{for(let t=e;t<=i;t++)a.push(t);a.push(null),a.push(this.totalPage)}return a},changeFirst(e){this.$emit("update:first",e)}}}),I={class:"paginate-fixed"},D={class:"mx-2"},Y={class:"d-flex flex-nowrap"},q=["title","disabled","onClick"],J={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},K=["d"],O={key:0,class:"btn btn-min-width"},Q=["onClick"],X=["title","disabled","onClick"],Z={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"},x=["d"];function ee(e,i,r,a,l,p){return s(),o("div",I,[n("div",D,u(e.$t("Showing items number",{page:e.page+1,totalPage:e.totalPage})),1),n("div",Y,[(s(!0),o(d,null,g(e.buttonsLeft,t=>(s(),o("button",{key:t.title,class:"btn",title:t.title,disabled:t.disabled,onClick:t.action},[(s(),o("svg",J,[n("path",{"fill-rule":"evenodd",d:t.path},null,8,K)]))],8,q))),128)),(s(!0),o(d,null,g(e.pagination,t=>(s(),o("div",{key:t},[t===null?(s(),o("span",O," ... ")):(s(),o("button",{key:1,class:c(["btn btn-min-width",{active:e.page===t-1}]),onClick:w=>e.changeFirst((t-1)*e.rowsPerPage)},u(t),11,Q))]))),128)),(s(!0),o(d,null,g(e.buttonsRight,t=>(s(),o("button",{key:t.title,class:"btn btn-min-width",title:t.title,disabled:t.disabled,onClick:t.action},[(s(),o("svg",Z,[n("path",{"fill-rule":"evenodd",d:t.path},null,8,x)]))],8,X))),128))])])}const te=m(A,[["render",ee]]),se=f({name:"ListPaginate",components:{PaginateSection:te,PaginateParams:V,ClassicLoading:S},mixins:[z],props:{first:{default:0,type:Number},rowsPerPage:{default:30,type:Number},totalCount:{default:0,type:Number},textCount:{default:void 0,type:String},id:{default:"",type:String},loadingText:{default:void 0,type:String},errorText:{default:void 0,type:String},loading:{default:!1,type:Boolean},isMobile:{default:!1,type:Boolean},justSizeChosen:{default:!1,type:Boolean},playerResponsive:{default:!1,type:Boolean}},emits:["update:first","update:rowsPerPage","update:isMobile"],data(){return{isPhone:!1,windowWidth:0}},computed:{...k(R,["playerHeight"]),buttonPlus(){return F.generalParameters.buttonPlus},rangeSize(){return this.windowWidth>1600?3:this.windowWidth>1530?2:1}},watch:{isPhone:{immediate:!0,handler(){this.$emit("update:isMobile",this.isPhone)}}},methods:{fetchMore(){this.$emit("update:first",this.first+this.rowsPerPage)},changeFirst(e){this.scrollToTop(),this.$emit("update:first",e)},changeSize(e){this.scrollToTop(),this.$emit("update:rowsPerPage",e)},scrollToTop(){const e=document.getElementById(this.id);if(!e||e.getBoundingClientRect().top>0)return;const i=e.getBoundingClientRect().top+window.scrollY-C.convertRemToPixels(3.5);window.scrollTo({top:i,behavior:"smooth"})}}}),ie=["id"],oe={key:0,class:"d-flex justify-content-between align-items-center flex-grow-1 w-100"},ae={class:"text-secondary me-3"},re=["disabled","title"];function ne(e,i,r,a,l,p){const t=P("ClassicLoading"),w=P("PaginateParams"),$=P("PaginateSection");return s(),o("div",{id:e.id,class:"d-flex flex-column align-items-center"},[M(t,{"loading-text":e.loadingText,"error-text":e.errorText},null,8,["loading-text","error-text"]),e.loading?h("",!0):(s(),o(d,{key:0},[e.justSizeChosen?h("",!0):(s(),o("div",oe,[n("div",ae,[e.textCount?(s(),o(d,{key:0},[b(u(e.textCount),1)],64)):h("",!0)]),!e.isPhone&&!e.justSizeChosen&&e.totalCount>0?(s(),y(w,{key:0,"rows-per-page":e.rowsPerPage,"onUpdate:rowsPerPage":e.changeSize},null,8,["rows-per-page","onUpdate:rowsPerPage"])):h("",!0)]))],64)),_(e.$slots,"list"),!e.isPhone&&!e.justSizeChosen&&e.totalCount>0?(s(),y($,{key:1,style:L(e.playerResponsive?"bottom:"+e.playerHeight:""),first:e.first,"rows-per-page":e.rowsPerPage,"total-count":e.totalCount,"range-size":e.rangeSize,"onUpdate:first":e.changeFirst},null,8,["style","first","rows-per-page","total-count","range-size","onUpdate:first"])):h("",!0),T(n("button",{disabled:e.loading,class:c(["btn",e.buttonPlus?"btn-primary align-self-center width-fit-content m-4":"btn-more"]),title:e.$t("See more"),onClick:i[0]||(i[0]=(...v)=>e.fetchMore&&e.fetchMore(...v))},[e.buttonPlus?(s(),o(d,{key:0},[b(u(e.$t("See more")),1)],64)):h("",!0),n("div",{class:c([e.buttonPlus?"ms-1":"","saooti-more"])},null,2)],10,re),[[B,e.first+e.rowsPerPage<e.totalCount&&(e.isPhone||e.justSizeChosen)]])],8,ie)}const ue=m(se,[["render",ne]]);export{ue as L};
