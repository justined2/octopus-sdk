const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PodcastPlayBar-lf7uxuMu.js","assets/ProgressBar-Du9DcDQS.js","assets/index.js","assets/index.css","assets/ProgressBar-c6qSncaO.css","assets/displayMethods-CzaGbBDz.js"])))=>i.map(i=>d[i]);
import{d as P,k as v,m as _,H as m,s as u,n as I,p as k,q as C,v as w,_ as E,r as p,x as S,o as t,c as o,g as y,w as n,t as i,i as l,f as a,y as B,F as $,b as N,e as c,h}from"./index.js";import{o as q}from"./orgaComputed-ovvKvHgW.js";import{d as D}from"./displayMethods-CzaGbBDz.js";const O=C(()=>w(()=>import("./PodcastPlayBar-lf7uxuMu.js"),__vite__mapDeps([0,1,2,3,4,5]))),A=P({name:"EmissionPlayerItem",components:{PodcastPlayBar:O},mixins:[D,v,q],props:{emission:{default:()=>({}),type:Object},nbPodcasts:{default:void 0,type:Number},rubriqueName:{default:void 0,type:String}},data(){return{activeEmission:!0,podcasts:[]}},computed:{..._(m,["playerPodcast","playerStatus"]),isProgressBar(){return u.emissionsPage.progressBar},buttonMore(){return u.emissionsPage.buttonMore},editRight(){return this.isEditRights(this.emission?.orga.id)}},created(){this.loadPodcasts()},methods:{...I(m,["playerPlay","playerChangeStatus"]),play(e){e===this.playerPodcast?this.playerChangeStatus(!1):this.playerPlay(e)},pause(){this.playerChangeStatus(!0)},async loadPodcasts(){const e=this.nbPodcasts?this.nbPodcasts:2,d=await k.fetchData({api:0,path:"podcast/search",parameters:{emissionId:this.emission.emissionId,size:e,includeStatus:["READY","PROCESSING"]},specialTreatement:!0});d.count===0&&(this.activeEmission=!1),this.podcasts=d.result}}}),M={class:"emission-player-container"},R={key:0,class:"emissionPlayerItem-info"},V={class:"img-box rounded-0"},j=["title","alt"],x={class:"fw-bold text-uppercase text-truncate p-2"},z={class:"d-flex justify-content-between flex-grow-1"},T={class:"d-flex flex-column"},U={class:"fw-bold text-truncate"},F=["onClick"],L=["title"],G=["onClick"],H=["title"],Y={key:0,class:"border-top emission-item-border-color p-2 secondary-bg d-flex justify-content-center"};function J(e,d,K,Q,W,X){const r=p("router-link"),f=p("PodcastPlayBar"),g=S("lazy");return t(),o("div",M,[y(r,{to:{name:"emission",params:{emissionId:e.emission.emissionId},query:{productor:e.filterOrgaId}},class:"d-flex flex-column text-dark"},{default:n(()=>[e.rubriqueName?(t(),o("div",R,i(e.rubriqueName),1)):l("",!0),a("div",V,[B(a("img",{width:"330",height:"330",title:e.$t("Emission name image",{name:e.emission.name}),alt:e.$t("Emission name image",{name:e.emission.name}),class:"img-box rounded-0"},null,8,j),[[g,e.proxyImageUrl(e.emission.imageUrl,"330")]])]),a("div",x,i(e.emission.name),1)]),_:1},8,["to"]),(t(!0),o($,null,N(e.podcasts,s=>(t(),o("div",{key:s.podcastId,class:"border-top emission-item-border-color p-2 d-flex flex-column"},[e.isProgressBar?(t(),c(r,{key:0,to:{name:"podcast",params:{podcastId:s.podcastId},query:{productor:e.filterOrgaId}},class:"text-dark fw-bold two-line-clamp"},{default:n(()=>[h(i(s.title),1)]),_:2},1032,["to"])):l("",!0),a("div",z,[a("div",T,[e.isProgressBar?(t(),c(f,{key:1,"podcast-id":s.podcastId,duration:s.duration},null,8,["podcast-id","duration"])):(t(),c(r,{key:0,to:{name:"podcast",params:{podcastId:s.podcastId},query:{productor:e.filterOrgaId}},class:"d-flex flex-grow-1 align-items-center define-width text-dark"},{default:n(()=>[a("div",U,i(s.title),1)]),_:2},1032,["to"]))]),e.playerPodcast!==s||e.playerPodcast===s&&e.playerStatus==="PAUSED"?(t(),o("button",{key:0,class:"play-button-box bg-secondary",onClick:b=>e.play(s)},[a("div",{class:"text-light saooti-play",title:e.$t("Play")},null,8,L)],8,F)):(t(),o("button",{key:1,class:"play-button-box bg-secondary",onClick:b=>e.pause(s)},[a("div",{class:"text-light saooti-pause",title:e.$t("Pause")},null,8,H)],8,G))])]))),128)),e.buttonMore&&e.podcasts.length===e.nbPodcasts?(t(),o("div",Y,[y(r,{to:{name:"emission",params:{emissionId:e.emission.emissionId},query:{productor:e.filterOrgaId}},class:"btn"},{default:n(()=>[h(i(e.$t("More episodes")),1)]),_:1},8,["to"])])):l("",!0)])}const te=E(A,[["render",J]]);export{te as default};
