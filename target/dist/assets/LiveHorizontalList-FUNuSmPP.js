import{L as m}from"./ListPaginate-edBLm_Ig.js";import{d as u,p as v,_ as g,r as l,o,c as a,f as d,t as y,g as P,w as b,F as h,b as z,e as C,i as f}from"./index.js";import{P as L}from"./PodcastItem-BYhh4qWG.js";import{e as I}from"./podcast-BC8TJPPC.js";import"./dom-BVfCmWpy.js";import"./ClassicLoading-Bf3Fy18F.js";import"./ClassicSpinner-CcbqjM9h.js";import"./orgaComputed-ovvKvHgW.js";import"./PodcastImage-jptmSDc7.js";import"./PodcastPlayButton-DEKHY6Ml.js";import"./emission-DCe5Xe3w.js";const E=u({name:"LiveHorizontalList",components:{PodcastItem:L,ListPaginate:m},props:{first:{default:0,type:Number},size:{default:30,type:Number},emissionId:{default:void 0,type:Number}},data(){return{dfirst:this.first,dsize:this.size,totalCount:0,lives:[],notEmpty:!1,inFetching:!1,isMobile:!1}},computed:{displayArray(){return this.isMobile?this.lives:this.lives.slice(this.dfirst,Math.min(this.dfirst+this.dsize,this.totalCount))}},watch:{dsize(){this.reloadList()},dfirst(){(!this.lives[this.dfirst]||this.lives[this.dfirst].podcastId===0)&&this.fetchContent(!1)}},created(){this.fetchContent(!0)},methods:{reloadList(){this.dfirst=0,this.fetchContent(!0)},async fetchContent(t){this.inFetching=!0,t&&(this.notEmpty=!1);const s=await v.fetchData({api:0,path:"podcast/search",parameters:{first:this.dfirst,size:this.dsize,emissionId:this.emissionId,sort:"DATE",includeStatus:"READY_TO_RECORD"},specialTreatement:!0});this.afterFetching(t,s)},afterFetching(t,s){if(t&&(this.lives.length=0),this.dfirst>this.lives.length)for(let e=this.lives.length-1,n=this.dfirst+this.dsize;e<n;e++)this.lives.push(I());const r=s.result.filter(e=>e!==null);this.lives=this.lives.slice(0,this.dfirst).concat(r).concat(this.lives.slice(this.dfirst+this.dsize,this.lives.length)),this.totalCount=s.count,this.lives.length!==0&&(this.notEmpty=!0),this.inFetching=!1}}}),M={key:0,class:"py-3"},w={class:"mb-0 mt-3"},F={class:"podcast-list"};function k(t,s,r,e,n,A){const p=l("PodcastItem"),c=l("ListPaginate");return t.notEmpty?(o(),a("div",M,[d("h2",w,y(t.$t("All live emission button")),1),P(c,{id:"liveListPaginate",first:t.dfirst,"onUpdate:first":s[0]||(s[0]=i=>t.dfirst=i),rowsPerPage:t.dsize,"onUpdate:rowsPerPage":s[1]||(s[1]=i=>t.dsize=i),isMobile:t.isMobile,"onUpdate:isMobile":s[2]||(s[2]=i=>t.isMobile=i),"total-count":t.totalCount,loading:!1,"player-responsive":!0},{list:b(()=>[d("div",F,[(o(!0),a(h,null,z(t.displayArray,i=>(o(),a(h,{key:i.podcastId},[i.podcastId!==0?(o(),C(p,{key:0,podcast:i},null,8,["podcast"])):f("",!0)],64))),128))])]),_:1},8,["first","rowsPerPage","isMobile","total-count"])])):f("",!0)}const S=g(E,[["render",k]]);export{S as default};
