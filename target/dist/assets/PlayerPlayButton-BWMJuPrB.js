const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChapteringModal-D_rfc4gn.js","assets/index.js","assets/index.css","assets/ClassicModal-mpJgF1dy.js","assets/ClassicModal-D0ckngeT.css","assets/ChapteringModal-CbR18pGT.css"])))=>i.map(i=>d[i]);
import{d as u,m as i,H as s,W as p,Q as v,s as k,n as C,_ as c,o as a,c as n,t as A,i as l,e as m,w as $,h as w,z as y,X as T,F as R,q as b,v as S,r as I,f as h,k as B,a as E,x as M,y as D}from"./index.js";import{f as N}from"./fetchRadioData-CeXKRHFU.js";import{C as _}from"./ClassicSpinner-CcbqjM9h.js";const te=u({computed:{...i(s,["playedTime","totalTime","transcriptText","radioUrl"]),...i(p,["isAdPlaying","currentAd","currentTimeAd","currentDurationAd","isAdPaused","titleAdvertising"]),displayPlayTime(){return this.isAdPlaying?v.formatDuration(Math.round(this.currentTimeAd)):this.playedTime},displayTotalTime(){return this.isAdPlaying?v.formatDuration(Math.round(this.currentDurationAd)):this.totalTime}}}),U=u({name:"PlayerTitle",mixins:[N],props:{playerError:{default:!1,type:Boolean},hlsReady:{default:!1,type:Boolean},titleClass:{default:"",type:String}},data(){return{radioInterval:void 0}},computed:{...i(s,["playerPodcast","playerRadio","playerLive","playerMedia","emissionName"]),...i(p,["isAdPlaying","titleAdvertising","linkAdvertising"]),isEmissionName(){return k.player.emissionName},podcastTitle(){return this.isAdPlaying?this.$t("Advertising")+this.titleAdvertising:this.playerRadio?this.playerRadio.podcast?this.playerRadio.podcast.title:this.displayTitle(this.playerRadio.metadata):this.playerPodcast?this.playerPodcast.title:this.playerMedia?this.playerMedia.title:this.playerLive?this.hlsReady?this.playerLive.title:this.playerLive.title+" ("+this.$t("Start in a while")+")":""}},watch:{playerRadio:{deep:!0,immediate:!0,handler(e,t){t&&e&&e.canalId===t.canalId||(clearInterval(this.radioInterval),this.playerRadio&&(this.fetchCurrentlyPlaying(),this.radioInterval=setInterval(()=>{this.fetchCurrentlyPlaying()},1e4)))}}},methods:{...C(s,["playerMetadata","playerRadioPodcast","playerRadioUpdateNextAdvertising"]),async fetchCurrentlyPlaying(){this.fetchRadioMetadata(this.playerRadio?.canalId??0,this.playerRadio?.metadata.title??"",this.updateMetadata,this.updateAdvertising)},updateAdvertising(e){this.playerRadioUpdateNextAdvertising(e)},updateMetadata(e,t,r){this.playerMetadata(e,r),this.playerRadioPodcast(t)}}}),L={key:0,class:"text-warning mx-2"};function W(e,t,r,g,f,P){return a(),n(R,null,[e.playerError?(a(),n("div",L,A(e.$t("Podcast play error")+" - "),1)):l("",!0),(a(),m(T(e.linkAdvertising?"a":"div"),{class:y(["flex-grow-1 text-truncate text-light",e.titleClass]),href:e.linkAdvertising,rel:"noopener",target:"_blank"},{default:$(()=>[w(A(e.podcastTitle),1)]),_:1},8,["class","href"]))],64)}const ae=c(U,[["render",W]]),q=b(()=>S(()=>import("./ChapteringModal-D_rfc4gn.js"),__vite__mapDeps([0,1,2,3,4,5]))),K=u({name:"PlayerChaptering",components:{ChapteringModal:q},data(){return{actualChapter:void 0,actualIndex:-1,showChaptering:!1}},computed:{...i(s,["playerChapteringPercent","playerElapsed"])},watch:{playerElapsed:{immediate:!0,handler(){if(!this.playerChapteringPercent){this.actualChapter=void 0;return}const e=(this.playerElapsed??0)*100;if(!(this.actualChapter&&this.isInChapter(e,this.actualChapter))){for(let t=0,r=this.playerChapteringPercent.length;t<r;t++)if(this.isInChapter(e,this.playerChapteringPercent[t])){this.actualChapter=this.playerChapteringPercent[t],this.actualIndex=t;return}this.actualChapter=void 0,this.actualIndex=-1}}}},methods:{isInChapter(e,t){return Math.floor(t.startPercent)<=e&&e<Math.floor(t.endPercent)}}}),z={key:0,class:"d-flex mb-1"},O={class:"text-truncate"},F={key:1,class:"margin-chaptering"};function V(e,t,r,g,f,P){const o=I("ChapteringModal");return e.actualChapter?(a(),n("div",z,[h("button",{class:"btn-transparent d-flex align-items-center text-truncate medium-text text-light",onClick:t[0]||(t[0]=d=>e.showChaptering=!e.showChaptering)},[h("div",O,A(e.actualIndex+1+" - "+e.actualChapter.title),1),t[2]||(t[2]=h("span",{class:"saooti-right small-text"},null,-1))]),e.showChaptering?(a(),m(o,{key:0,"actual-chapter":e.actualIndex,onClose:t[1]||(t[1]=d=>e.showChaptering=!1)},null,8,["actual-chapter"])):l("",!0)])):e.playerChapteringPercent?(a(),n("div",F)):l("",!0)}const ie=c(K,[["render",V]]),H=u({name:"PlayerImage",components:{},mixins:[B],props:{imageWidth:{default:48,type:Number}},computed:{...i(s,["playerPodcast","playerRadio","podcastImage"]),...i(p,["linkAdvertising"]),...i(E,["filterOrgaId"]),podcastShareUrl(){return this.playerRadio?.podcast?.podcastId?{name:"podcast",params:{podcastId:this.playerRadio?.podcast?.podcastId.toString()},query:{productor:this.filterOrgaId}}:this.playerPodcast?{name:"podcast",params:{podcastId:this.playerPodcast.podcastId.toString()},query:{productor:this.filterOrgaId}}:""}}}),X=["href","title"],Q=["width","height","alt"];function j(e,t,r,g,f,P){const o=I("router-link"),d=M("lazy");return a(),n("div",null,[e.linkAdvertising?(a(),n("a",{key:0,rel:"noopener",target:"_blank",href:e.linkAdvertising,class:y(["saooti-link player-image",e.imageWidth>50?"big-player-image":""]),title:e.$t("Advertising")},null,10,X)):e.podcastImage?(a(),m(o,{key:1,to:e.podcastShareUrl},{default:$(()=>[D(h("img",{width:e.imageWidth,height:e.imageWidth,alt:e.$t("Podcast image"),class:y(["player-image",e.imageWidth>50?"big-player-image":""])},null,10,Q),[[d,e.proxyImageUrl(e.podcastImage,e.imageWidth)]])]),_:1},8,["to"])):l("",!0)])}const re=c(H,[["render",j]]),G=u({name:"PlayerPlayButton",components:{ClassicSpinner:_},props:{playerError:{default:!1,type:Boolean},isBigButton:{default:!1,type:Boolean}},data(){return{}},computed:{...i(s,["isPlaying","isPaused"]),...i(p,["isAdPlaying","isAdPaused"]),displayIsPlaying(){return this.isAdPlaying&&!this.isAdPaused||!this.isAdPlaying&&this.isPlaying},displayIsPaused(){return this.isAdPlaying&&this.isAdPaused||!this.isAdPlaying&&this.isPaused}},created(){window.addEventListener("keydown",this.addKeyboardControl)},beforeUnmount(){window.removeEventListener("keydown",this.addKeyboardControl)},methods:{...C(p,["updateIsAdPaused"]),...C(s,["playerChangeStatus"]),addKeyboardControl(e){if(!e||e===null)return;const t=e.target;if(!(!t||t.tagName.toUpperCase()=="INPUT"||t.tagName.toUpperCase()=="TEXTAREA")){if(e.key===" "||e.key==="Spacebar"){e.preventDefault(),this.switchPausePlay();return}if(!this.isAdPlaying){if(e.key==="ArrowRight"&&e.ctrlKey){this.changeCurrentTime(15);return}e.key==="ArrowLeft"&&e.ctrlKey&&this.changeCurrentTime(-15)}}},changeCurrentTime(e){const t=document.querySelector("#audio-player");t&&(t.currentTime+=e)},switchPausePlay(){if(this.isAdPlaying){this.updateIsAdPaused(!this.isAdPaused);return}const e=document.querySelector("#audio-player");e&&this.playerChangeStatus(!e.paused)}}}),J=["title"];function Y(e,t,r,g,f,P){const o=I("ClassicSpinner");return e.playerError?l("",!0):(a(),n("button",{key:0,title:e.$t("Play"),class:y([{"saooti-play":e.displayIsPaused,"saooti-pause":e.displayIsPlaying,"p-0":!e.displayIsPaused&&!e.displayIsPlaying,"play-button-box":!e.isBigButton,"play-big-button-box":e.isBigButton},"btn text-light bg-primary"]),onClick:t[0]||(t[0]=(...d)=>e.switchPausePlay&&e.switchPausePlay(...d))},[!e.displayIsPaused&&!e.displayIsPlaying?(a(),m(o,{key:0,small:!e.isBigButton},null,8,["small"])):l("",!0)],10,J))}const se=c(G,[["render",Y]]);export{ie as P,re as a,se as b,ae as c,te as p};
