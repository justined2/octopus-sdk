import{o as p}from"./orgaComputed-ovvKvHgW.js";import{P as h}from"./PodcastList-BM7kout9.js";import b from"./ProductorSearch-jhMN6ObQ.js";import{A as I}from"./AdvancedSearch-H4knw74s.js";import{d as f,m,a as q,_ as R,r as d,o as P,c as y,g as s}from"./index.js";import"./ListPaginate-edBLm_Ig.js";import"./dom-BVfCmWpy.js";import"./ClassicLoading-Bf3Fy18F.js";import"./ClassicSpinner-CcbqjM9h.js";import"./PodcastItem-BYhh4qWG.js";import"./PodcastImage-jptmSDc7.js";import"./PodcastPlayButton-DEKHY6Ml.js";import"./podcast-BC8TJPPC.js";import"./emission-DCe5Xe3w.js";import"./ClassicSearch-DeffNtC6.js";const v=f({name:"PodcastsPage",components:{PodcastList:h,ProductorSearch:b,AdvancedSearch:I},mixins:[p],props:{productor:{default:void 0,type:String},isEducation:{default:!1,type:Boolean},searchInit:{default:"",type:String}},data(){return{isInit:!1,searchPattern:"",organisationId:void 0,monetization:"UNDEFINED",fromDate:void 0,toDate:void 0,resetRubriquage:!1,includeHidden:!1,sortCriteria:"DATE",notValid:!1,iabId:void 0,noRubriquageId:[],rubriquageId:[],rubriqueId:[],onlyVideo:!1}},computed:{...m(q,["filterRubrique","filterIab"]),organisationRight(){return this.isEditRights(this.organisationId)},orgaArray(){return this.organisationId?[this.organisationId]:[]},organisation(){return this.organisationId?this.organisationId:this.filterOrgaId},withVideo(){return this.onlyVideo===!1?void 0:!0}},watch:{organisationId(){this.isInit&&(this.resetRubriquage=!this.resetRubriquage,this.rubriquageId=[],this.rubriqueId=[],this.noRubriquageId=[])},searchPattern(i){this.sortCriteria=i!==""?"SCORE":"DATE"},filterRubrique:{deep:!0,handler(){this.updateRubriquageFilter(this.filterRubrique)}},filterIab:{deep:!0,handler(){this.iabId=this.filterIab?.id}}},created(){this.initPodcastsPage()},methods:{initPodcastsPage(){this.searchPattern=this.searchInit??"",this.organisationId=this.productor?this.productor:this.filterOrgaId,this.includeHidden=this.organisation!==void 0&&this.organisationRight,this.iabId=this.filterIab?.id,this.filterRubrique.length&&this.updateRubriquageFilter(this.filterRubrique),this.$nextTick(()=>{this.isInit=!0})},updateRubriquageFilter(i){const r=i.length,o=[],a=[],n=[];for(let e=0;e<r;e++)i[e].rubriqueId===-1?a.push(i[e].rubriquageId):i[e].rubriqueId===0?o.push(i[e].rubriquageId):n.push(i[e].rubriqueId);this.rubriquageId=o,this.rubriqueId=n,this.noRubriquageId=a}}}),D={class:"page-box"};function S(i,r,o,a,n,e){const u=d("ProductorSearch"),g=d("AdvancedSearch"),l=d("PodcastList");return P(),y("div",D,[s(u,{"organisation-id":i.organisationId,"onUpdate:organisationId":r[0]||(r[0]=t=>i.organisationId=t),"search-pattern":i.searchPattern,"onUpdate:searchPattern":r[1]||(r[1]=t=>i.searchPattern=t)},null,8,["organisation-id","search-pattern"]),s(g,{"only-video":i.onlyVideo,"onUpdate:onlyVideo":r[2]||(r[2]=t=>i.onlyVideo=t),"is-education":i.isEducation,"is-emission":!1,"reset-rubriquage":i.resetRubriquage,"sort-criteria":i.sortCriteria,"include-hidden":i.includeHidden,"organisation-id":i.organisationId,onUpdateCategory:r[3]||(r[3]=t=>i.iabId=t),onUpdateRubriquageFilter:i.updateRubriquageFilter,onUpdateMonetization:r[4]||(r[4]=t=>i.monetization=t),onUpdateFromDate:r[5]||(r[5]=t=>i.fromDate=t),onUpdateToDate:r[6]||(r[6]=t=>i.toDate=t),onUpdateSortCriteria:r[7]||(r[7]=t=>i.sortCriteria=t),onIncludeHidden:r[8]||(r[8]=t=>i.includeHidden=t),onNotValid:r[9]||(r[9]=t=>i.notValid=t)},null,8,["only-video","is-education","reset-rubriquage","sort-criteria","include-hidden","organisation-id","onUpdateRubriquageFilter"]),s(l,{"show-count":!0,first:0,size:30,"organisation-id":i.orgaArray,query:i.searchPattern,monetization:i.monetization,before:i.toDate,after:i.fromDate,"sort-criteria":i.sortCriteria,"include-hidden":i.includeHidden,"not-valid":i.notValid,"iab-id":i.iabId,"rubrique-id":i.rubriqueId,"rubriquage-id":i.rubriquageId,"no-rubriquage-id":i.noRubriquageId,"with-video":i.withVideo},null,8,["organisation-id","query","monetization","before","after","sort-criteria","include-hidden","not-valid","iab-id","rubrique-id","rubriquage-id","no-rubriquage-id","with-video"])])}const L=R(v,[["render",S]]);export{L as default};
