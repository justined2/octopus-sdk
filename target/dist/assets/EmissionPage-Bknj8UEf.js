const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PodcastFilterList-0x5vpjx3.js","assets/index.js","assets/index.css","assets/ClassicSearch-DeffNtC6.js","assets/ClassicSearch-Cp4jKxP3.css","assets/PodcastList-BM7kout9.js","assets/ListPaginate-edBLm_Ig.js","assets/dom-BVfCmWpy.js","assets/ClassicLoading-Bf3Fy18F.js","assets/ClassicSpinner-CcbqjM9h.js","assets/ClassicSpinner-DKas6cj3.css","assets/ListPaginate-DD485-De.css","assets/PodcastItem-BYhh4qWG.js","assets/orgaComputed-ovvKvHgW.js","assets/PodcastImage-jptmSDc7.js","assets/PodcastPlayButton-DEKHY6Ml.js","assets/PodcastPlayButton-LzHMKQPS.css","assets/PodcastImage-BS2GsMWv.css","assets/PodcastItem-CPiW5amy.css","assets/podcast-BC8TJPPC.js","assets/emission-DCe5Xe3w.js","assets/SharePlayer-BmPnWwe5.js","assets/SharePlayer-qTl7ZWgg.css","assets/ShareButtons-9SDHM0bh.js","assets/displayMethods-CzaGbBDz.js","assets/ShareButtons--uAtP8TI.css","assets/ShareDistribution-7ftf1Lx4.js","assets/SnackBar-BYGi5e7s.js","assets/SnackBar-BAfrY8QD.css","assets/ShareDistribution-CiKHgTC-.css","assets/EditBox-Et76Rrff.js","assets/SubscribeButtons-Dl95bliJ.js","assets/SubscribeButtons-Cn_L18lM.css","assets/LiveHorizontalList-FUNuSmPP.js","assets/PodcastmakerHeader-CO1f5Iwt.js","assets/PodcastmakerHeader-BgINiLsA.css"])))=>i.map(i=>d[i]);
import{d as I,j as k,k as D,m as S,l as b,s as B,n as R,u as T,p as A,q as n,v as a,_ as O,r as i,x as U,o as e,c as l,F as $,e as r,i as t,f as o,y as w,t as u,g as m,z as C}from"./index.js";import{d as V}from"./displayMethods-CzaGbBDz.js";import{o as F}from"./orgaComputed-ovvKvHgW.js";import H from"./ClassicLoading-Bf3Fy18F.js";import"./ClassicSpinner-CcbqjM9h.js";const z=n(()=>a(()=>import("./PodcastFilterList-0x5vpjx3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),N=n(()=>a(()=>import("./SharePlayer-BmPnWwe5.js"),__vite__mapDeps([21,1,2,22]))),j=n(()=>a(()=>import("./ShareButtons-9SDHM0bh.js"),__vite__mapDeps([23,1,2,24,25]))),M=n(()=>a(()=>import("./ShareDistribution-7ftf1Lx4.js"),__vite__mapDeps([26,1,2,27,28,24,29]))),q=n(()=>a(()=>import("./EditBox-Et76Rrff.js"),__vite__mapDeps([30,1,2]))),K=n(()=>a(()=>import("./SubscribeButtons-Dl95bliJ.js"),__vite__mapDeps([31,1,2,32]))),G=n(()=>a(()=>import("./LiveHorizontalList-FUNuSmPP.js"),__vite__mapDeps([33,6,7,8,9,1,2,10,11,12,13,14,15,16,17,18,19,20]))),Y=n(()=>a(()=>import("./PodcastPlayButton-DEKHY6Ml.js"),__vite__mapDeps([15,1,2,16]))),J=n(()=>a(()=>import("./PodcastmakerHeader-CO1f5Iwt.js"),__vite__mapDeps([34,1,2,35]))),Q=I({components:{PodcastFilterList:z,SharePlayer:N,ShareButtons:j,ShareDistribution:M,EditBox:q,SubscribeButtons:K,LiveHorizontalList:G,ClassicLoading:H,PodcastPlayButton:Y,PodcastmakerHeader:J},mixins:[V,k,F,D],props:{emissionId:{default:void 0,type:Number},isEducation:{default:!1,type:Boolean}},emits:["emissionTitle"],data(){return{loaded:!1,title:"",emission:void 0,error:!1,rssEmission:!1,ftpEmission:!1,exclusive:!1,notExclusive:!1,fetchLive:!0,lastPodcast:void 0}},computed:{...S(b,["apiUrl"]),pageParameters(){return{isShareButtons:B.podcastPage.ShareButtons}},rssUrl(){return`${this.apiUrl}rss/emission/${this.emissionId}`},name(){return this.emission?.name??""},description(){return this.emission?.description??""},editRight(){return this.isEditRights(this.emission?.orga.id)}},watch:{emissionId:{immediate:!0,handler(){this.getEmissionDetails()}}},beforeUnmount(){this.contentToDisplayUpdate(null)},methods:{...R(T,["contentToDisplayUpdate"]),initError(){this.error=!0,this.loaded=!0},handleAnnotations(){this.emission?.annotations&&(this.rssEmission=this.emission.annotations.SOURCE_KIND==="RSS",this.ftpEmission=this.emission.annotations.SOURCE_KIND==="FTP",this.emission.annotations.exclusive&&(this.exclusive=this.emission.annotations.exclusive==="true",this.exclusive=this.exclusive&&this.authOrgaId!==this.emission.orga.id),this.emission.annotations.notExclusive&&(this.notExclusive=this.emission.annotations.notExclusive==="true"))},async getEmissionDetails(){this.loaded=!1,this.error=!1;try{if(this.emission=await A.fetchData({api:0,path:"emission/"+this.emissionId}),this.emission.orga.privacy!=="PUBLIC"&&this.filterOrgaId!==this.emission.orga.id&&this.$route.query.productor!==this.emission.orga.id){this.initError();return}this.contentToDisplayUpdate(this.emission),this.$emit("emissionTitle",this.name),this.loaded=!0,this.handleAnnotations()}catch(s){this.handle403(s),this.initError()}},podcastsFetched(s){for(const d of s)if(d.processingStatus==="READY"&&d.availability.visibility){this.lastPodcast=d;return}}}}),W={class:"page-box"},X={class:"module-box"},Z={class:"d-flex mb-2"},x={class:"w-100"},ss=["alt"],is={class:"h2 mb-3"},es=["innerHTML"],ts={key:0,class:"d-flex align-items-center mt-3"},os={class:"ms-2 fw-bold"},ns={class:"module-box"};function as(s,d,rs,ds,ls,ms){const c=i("PodcastmakerHeader"),h=i("PodcastPlayButton"),p=i("SubscribeButtons"),g=i("EditBox"),v=i("SharePlayer"),f=i("LiveHorizontalList"),_=i("PodcastFilterList"),E=i("ShareButtons"),P=i("ShareDistribution"),y=i("ClassicLoading"),L=U("lazy");return e(),l("div",W,[s.loaded&&!s.error?(e(),l($,{key:0},[s.isPodcastmaker?(e(),r(c,{key:0,"page-title":s.$t("Emission"),"image-url":s.emission.imageUrl},null,8,["page-title","image-url"])):t("",!0),o("div",{class:C(["d-flex flex-column page-element",s.isPodcastmaker?"page-element-podcastmaker":""])},[o("div",X,[o("div",Z,[o("div",x,[w(o("img",{width:"250",height:"250",alt:s.$t("Emission name image",{name:s.name}),class:"img-box img-box-podcast mb-3 flex-column justify-content-start align-items-start position-relative flex-shrink-0 float-start me-3"},null,8,ss),[[L,s.proxyImageUrl(s.emission.imageUrl,"250")]]),o("div",is,u(s.name),1),o("p",{class:"html-wysiwyg-content descriptionText",innerHTML:s.urlify(s.description)},null,8,es),s.lastPodcast?(e(),l("div",ts,[m(h,{podcast:s.lastPodcast,"just-buttons":!0},null,8,["podcast"]),o("div",os,u(s.$t("Listen to the latest episode")),1)])):t("",!0),s.isPodcastmaker?(e(),r(p,{key:1,class:"mt-4",emission:s.emission,"window-width":1e3,"justify-center":!1},null,8,["emission"])):t("",!0)])]),s.editRight&&!s.isPodcastmaker?(e(),r(g,{key:0,emission:s.emission,"rss-emission":s.rssEmission,"ftp-emission":s.ftpEmission,onIsUpdated:s.getEmissionDetails},null,8,["emission","rss-emission","ftp-emission","onIsUpdated"])):t("",!0)]),!s.isPodcastmaker&&(s.authOrgaId!==void 0||s.notExclusive)?(e(),r(v,{key:0,emission:s.emission,exclusive:s.exclusive,"not-exclusive":s.notExclusive,"organisation-id":s.authOrgaId,"is-education":s.isEducation},null,8,["emission","exclusive","not-exclusive","organisation-id","is-education"])):t("",!0),o("div",ns,[s.isPodcastmaker?t("",!0):(e(),r(f,{key:0,class:"mx-2","emission-id":s.emissionId},null,8,["emission-id"])),m(_,{class:"mx-2","show-count":!0,"emission-id":s.emissionId,"category-filter":!1,"edit-right":s.editRight,"productor-id":[s.emission.orga.id],onFetch:s.podcastsFetched},null,8,["emission-id","edit-right","productor-id","onFetch"])]),s.pageParameters.isShareButtons?(e(),r(E,{key:1,emission:s.emission,"organisation-id":s.emission.orga.id},null,8,["emission","organisation-id"])):t("",!0),s.editRight&&!s.isPodcastmaker?(e(),r(P,{key:2,"emission-id":s.emissionId},null,8,["emission-id"])):t("",!0)],2)],64)):t("",!0),m(y,{"loading-text":s.loaded?void 0:s.$t("Loading content ..."),"error-text":s.error?s.$t("Emission doesn't exist"):void 0},null,8,["loading-text","error-text"])])}const vs=O(Q,[["render",as]]);export{vs as default};
