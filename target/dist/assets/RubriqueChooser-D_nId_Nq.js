import{s as u}from"./selenium-CamdCoc1.js";import{C as s}from"./ClassicMultiselect-C-Xf0Kt3.js";import{d as l,_ as a,r as o,o as d,e as n}from"./index.js";const h=l({components:{ClassicMultiselect:s},mixins:[u],props:{defaultanswer:{default:"",type:String},width:{default:"100%",type:String},multiple:{default:!1,type:Boolean},reset:{default:!1,type:Boolean},allRubriques:{default:()=>[],type:Array},rubriqueSelected:{default:void 0,type:Number},rubriqueSelectedArray:{default:void 0,type:Object},rubriquageId:{default:void 0,type:Number},withoutRubrique:{default:!1,type:Boolean},isDisabled:{default:!1,type:Boolean},noDeselect:{default:!0,type:Boolean},inModal:{default:!1,type:Boolean}},emits:["update:rubriqueSelected","update:rubriqueSelectedArray","selected"],data(){return{maxElement:250,rubrique:void 0,rubriqueForArray:[],withoutItem:{name:this.$t("Without rubric"),rubriqueId:-1}}},computed:{idClassicMultiselect(){return this.rubriquageId?"rubriqueChooser"+this.rubriquageId:"rubriqueChooser"},getDefaultRubrique(){if(this.defaultanswer!=="")return{name:this.defaultanswer,rubriqueId:0}},rubriques(){let e=this.allRubriques;return this.getDefaultRubrique&&(this.withoutRubrique&&e.unshift(this.withoutItem),e.unshift(this.getDefaultRubrique)),e},model:{get(){return this.multiple?this.rubriqueForArray:this.rubrique},set(e){if(!this.multiple){this.rubrique=e;return}this.rubriqueForArray=e}}},watch:{rubriqueSelected:{immediate:!0,handler(){this.rubriqueSelected?this.initRubriqueSelected():this.rubrique=this.getDefaultRubrique}},reset(){this.rubrique=this.getDefaultRubrique}},mounted(){this.initRubriqueArray()},methods:{onSearchRubrique(e){let r=this.rubriques;e&&(r=r.filter(t=>t.name.toUpperCase().includes(e.toUpperCase()))),this.$refs.selectRubrique.afterSearch(r,r.length)},onRubriqueSelected(e){if(this.rubriqueSelected!==void 0&&this.$emit("update:rubriqueSelected",e.rubriqueId),this.rubriqueSelectedArray!==void 0){const r=[];e.forEach(t=>{r.push(t.rubriqueId??0)}),this.$emit("update:rubriqueSelectedArray",r)}else this.$emit("selected",e)},initRubriqueSelected(){this.rubrique=this.rubriques.find(e=>e.rubriqueId===this.rubriqueSelected)??this.getDefaultRubrique},initRubriqueArray(){!this.rubriqueForArray||!this.rubriqueSelectedArray||(this.rubriqueForArray.length=0,this.rubriqueSelectedArray.forEach(e=>{const r=this.rubriques.find(t=>t.rubriqueId===e);this.rubriqueForArray&&r&&this.rubriqueForArray.push(r)}))}}});function b(e,r,t,c,q,f){const i=o("ClassicMultiselect");return d(),n(i,{id:e.idClassicMultiselect,ref:"selectRubrique","option-chosen":e.model,"option-label":"name",label:e.$t("By rubric"),placeholder:e.$t("Type string to filter by categories"),"max-element":e.maxElement,multiple:e.multiple,"min-search-length":1,width:e.width,"in-modal":e.inModal,"is-disabled":e.isDisabled,"no-deselect":e.noDeselect,onOnSearch:e.onSearchRubrique,onSelected:e.onRubriqueSelected},null,8,["id","option-chosen","label","placeholder","max-element","multiple","width","in-modal","is-disabled","no-deselect","onOnSearch","onSelected"])}const S=a(h,[["render",b]]);export{S as default};
