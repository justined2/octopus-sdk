const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CheckIdentityModal-BUwgSOBK.js","assets/config-CKXj5qII.js","assets/ClassicInputText-DAR8Tgsp.js","assets/index.js","assets/index.css","assets/ClassicInputText-BffzFYCu.css","assets/RecaptchaModal-5a-viNyC.js","assets/ClassicLoading-Bf3Fy18F.js","assets/ClassicSpinner-CcbqjM9h.js","assets/ClassicSpinner-DKas6cj3.css","assets/ClassicModal-mpJgF1dy.js","assets/ClassicModal-D0ckngeT.css","assets/CommentStore-DzAJcgPT.js","assets/LikeButton-BVKy6NtO.js","assets/LikeButton-Bymv4ed4.css"])))=>i.map(i=>d[i]);
import{d as f,m as d,D as g,n as y,p as r,q as u,v as h,_ as C,r as m,o as s,c as n,e as I,i as a,F as c,b as A,g as L,t as v}from"./index.js";import{u as l}from"./CommentStore-DzAJcgPT.js";const F=u(()=>h(()=>import("./CheckIdentityModal-BUwgSOBK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),_=u(()=>h(()=>import("./LikeButton-BVKy6NtO.js"),__vite__mapDeps([13,3,4,14]))),D=f({name:"LikeSection",components:{CheckIdentityModal:F,LikeButton:_},props:{comment:{default:()=>{},type:Object},editRight:{default:!1,type:Boolean},podcast:{default:void 0,type:Object}},emits:["deleteComment","update:comment"],data(){return{isCheckIdentityActions:void 0,userFeeling:void 0,config:void 0,podcastFeeling:void 0}},computed:{...d(g,["authOrgaId"]),...d(l,["commentUser"]),configToApply(){return this.comment?this.config?.commentLikes:this.config?.podcastLikes},podcastId(){return this.podcast?.podcastId??0},feelingSection(){return[{name:"like",counter:this.comment?.likes??this.podcastFeeling?.likesCount,condition:this.configToApply?.likeEnabled??!1},{name:"dislike",counter:this.editRight?this.comment?.dislikes??this.podcastFeeling?.dislikesCount:0,condition:this.configToApply?.dislikeEnabled??!1}]},canLikeOrDislike(){return!this.configToApply?.authRequired||this.configToApply.authRequired&&this.authOrgaId!==void 0}},created(){this.initLikeConfig()},methods:{...y(l,["getCommentsConfig"]),async initLikeConfig(){this.podcast&&(this.config=await this.getCommentsConfig(this.podcast),!(this.comment||!this.config.podcastLikes.likeEnabled&&!this.config.podcastLikes.dislikeEnabled)&&await this.fetchPodcastCounters())},async fetchPodcastCounters(){const t=await r.fetchData({api:2,path:"podcast/status",parameters:{podcastId:[this.podcastId],uuid:this.commentUser?.uuid},isNotAuth:!0});this.podcastFeeling=t[this.podcastId],this.podcastFeeling.feeling==="LIKED"?this.userFeeling="like":this.podcastFeeling.feeling==="DISLIKED"&&(this.userFeeling="dislike")},transformInThousands(t){return t>=1e3?Math.round(t/100)/10+"k":t.toString()},async initiateLikeActions(t){if(!this.commentUser?.name){this.isCheckIdentityActions=t;return}this.likeActions(t)},async likeActions(t){const i=this.comment?"comment/":"podcast/",o=await r.putData({api:2,path:i+t,dataToSend:{ids:[this.comment?.commentId??this.podcastId],name:this.commentUser?.name,uuid:this.commentUser?.uuid},isNotAuth:!0});this.comment?this.$emit("update:comment",{...this.comment,likes:o[this.comment.commentId].likesCount,dislikes:o[this.comment.commentId].dislikesCount}):this.podcastFeeling=o[this.podcastId],this.userFeeling=this.userFeeling?void 0:t,this.isCheckIdentityActions=void 0}}}),E={class:"d-flex align-items-center mt-1"},S={key:0,class:"ms-1 me-2"};function T(t,i,o,O,$,B){const p=m("CheckIdentityModal"),k=m("LikeButton");return s(),n("div",E,[t.isCheckIdentityActions?(s(),I(p,{key:0,title:t.$t("Welcome, thanks for your interaction"),onValidate:i[0]||(i[0]=e=>t.likeActions(t.isCheckIdentityActions)),onClose:i[1]||(i[1]=e=>t.isCheckIdentityActions=void 0)},null,8,["title"])):a("",!0),(s(!0),n(c,null,A(t.feelingSection,e=>(s(),n(c,{key:e.name},[e.condition?(s(),n(c,{key:0},[L(k,{like:e.name==="like","is-active":e.name===t.userFeeling,"can-interact":t.canLikeOrDislike,onLikeAction:t.initiateLikeActions},null,8,["like","is-active","can-interact","onLikeAction"]),e.counter?(s(),n("span",S,v(t.transformInThousands(e.counter)),1)):a("",!0)],64)):a("",!0)],64))),128))])}const P=C(D,[["render",T]]);export{P as default};
