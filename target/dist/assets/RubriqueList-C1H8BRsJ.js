const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RubriqueChooser-D_nId_Nq.js","assets/selenium-CamdCoc1.js","assets/ClassicMultiselect-C-Xf0Kt3.js","assets/index.js","assets/index.css","assets/ClassicMultiselect-BX6h9cdx.css"])))=>i.map(i=>d[i]);
import{d as m,O as R,m as y,a as b,n as w,q as v,v as I,_ as C,r as q,o as s,c as n,f as o,t as l,y as h,ad as k,F as c,b as p,A as L,g as _,w as $,e as D,i as S}from"./index.js";const F=v(()=>I(()=>import("./RubriqueChooser-D_nId_Nq.js"),__vite__mapDeps([0,1,2,3,4,5]))),N=m({name:"RubriqueList",components:{ClassicPopover:R,RubriqueChooser:F},props:{rubriquages:{default:()=>[],type:Array}},data(){return{hidenRubriques:[],rubriques:[],rubriquage:void 0}},computed:{...y(b,["filterRubrique","filterRubriqueDisplay"]),rubriqueDisplay(){return this.filterRubriqueDisplay.filter(e=>e.podcastCount!==0)},rubriquageDisplay(){const e=Array.from(this.filterRubrique);if(e.length){const i=e.map(r=>r.rubriquageId);return this.rubriquages.filter(r=>{if(r.rubriquageId)return!i.includes(r.rubriquageId)})}return this.rubriquages}},watch:{filterRubrique:{deep:!0,handler(){this.selectNewRubriquage()}}},mounted(){this.selectNewRubriquage()},beforeUnmount(){window.removeEventListener("resize",this.resizeWindow)},methods:{...w(b,["filterUpdateRubrique","filterUpdateRubriqueDisplay"]),initRubriques(){this.rubriquage&&(this.filterUpdateRubriqueDisplay(this.rubriquage.rubriques),window.addEventListener("resize",this.resizeWindow),this.$nextTick(()=>{this.resizeWindow()}))},addFilterFromPopover(e){this.$refs.popoverRubrique.clearClick(),this.addFilter(e)},addFilter(e){if(!this.rubriquage)return;const i={rubriquageId:this.rubriquage.rubriquageId??0,rubriqueId:e.rubriqueId??0,nameRubriquage:this.rubriquage.title,nameRubrique:e.name},r=Array.from(this.filterRubrique);r.push(i),this.filterUpdateRubrique(r);const u=this.$route.query,d=r.map(a=>a.rubriquageId+":"+a.rubriqueId).join();this.$router.replace({query:{...u,rubriquesId:d}}),this.selectNewRubriquage()},selectNewRubriquage(){const e=this.rubriquages.length;if(e===this.filterRubrique.length)return;let i=0;const r=this.filterRubrique.map(u=>u.rubriquageId);for(i;i<e;i++){const u=this.rubriquages[i].rubriquageId;if(u&&!r.includes(u))break}this.rubriquage=this.rubriquages[i],this.initRubriques()},resizeWindow(){const e=this.$refs.rubriqueListContainer;e!==null&&(e.style.justifyContent="flex-start",this.hidenRubriques.length=0,this.rubriqueDisplay.forEach(i=>{const r=this.$refs["rubrique"+i.rubriqueId][0];r&&r.classList.contains("hid")&&r.classList.remove("hid")}),this.rubriqueDisplay.forEach(i=>{const r=this.$refs["rubrique"+i.rubriqueId][0];if(!r)return;const u=r.parentElement;u!==null&&r.offsetLeft+r.clientWidth<=u.clientWidth-20||(this.hidenRubriques.push(i),r.classList.contains("hid")||(r.className+=" hid"))}),this.hidenRubriques.length||(e.style.justifyContent="center"))},onRubriquageSelected(){this.initRubriques()}}}),A={class:"d-inline-flex w-100 mb-3 px-3 hide-phone"},E={ref:"rubriqueListContainer",class:"rubrique-list-container"},P={for:"rubrique-list-select",class:"hid"},z=["value"],U=["onClick"],W=["title"];function B(e,i,r,u,d,a){const f=q("RubriqueChooser"),g=q("ClassicPopover");return s(),n("div",A,[o("div",E,[o("label",P,l(e.$t("By topic")),1),h(o("select",{id:"rubrique-list-select","onUpdate:modelValue":i[0]||(i[0]=t=>e.rubriquage=t),class:"c-hand",onChange:i[1]||(i[1]=(...t)=>e.onRubriquageSelected&&e.onRubriquageSelected(...t))},[(s(!0),n(c,null,p(e.rubriquageDisplay,t=>(s(),n("option",{key:t.rubriquageId,value:t},l(t.title),9,z))),128))],544),[[k,e.rubriquage]]),(s(!0),n(c,null,p(e.rubriqueDisplay,t=>(s(),n("button",{ref_for:!0,ref:"rubrique"+t.rubriqueId,key:t.rubriqueId,class:"btn btn-primary btn-on-dark m-1",onClick:T=>e.addFilter(t)},l(t.name),9,U))),128))],512),h(o("button",{id:"rubriques-dropdown",class:"btn btn-primary btn-on-dark m-1 saooti-more",title:e.$t("See more")},null,8,W),[[L,e.hidenRubriques.length]]),_(g,{ref:"popoverRubrique",target:"rubriques-dropdown","only-click":!0,"is-fixed":!0,"left-pos":!0},{default:$(()=>[e.hidenRubriques.length?(s(),D(f,{key:0,class:"rubrique-chooser-minwidth","rubriquage-id":e.rubriquage.rubriquageId,"all-rubriques":e.hidenRubriques,onSelected:i[2]||(i[2]=t=>e.addFilterFromPopover(t))},null,8,["rubriquage-id","all-rubriques"])):S("",!0)]),_:1},512)])}const j=C(N,[["render",B]]);export{j as default};
