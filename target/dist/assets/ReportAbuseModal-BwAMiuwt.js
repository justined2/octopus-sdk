import{C as s}from"./config-CKXj5qII.js";import u from"./ClassicInputText-DAR8Tgsp.js";import{R as l}from"./RecaptchaModal-5a-viNyC.js";import{d,m as c,n as b,p as h,_ as f,r as a,o as n,e as i,w as C,i as A,g as $}from"./index.js";import{u as m}from"./CommentStore-DzAJcgPT.js";import"./ClassicLoading-Bf3Fy18F.js";import"./ClassicSpinner-CcbqjM9h.js";import"./ClassicModal-mpJgF1dy.js";const D=d({name:"ReportAbuseModal",components:{RecaptchaModal:l,ClassicInputText:u},props:{comment:{default:void 0,type:Object}},emits:["close","update:comment"],data(){return{name:void 0,errorName:!1,maxName:s.MAX_COMMENT_NAME,abuseDescription:void 0,abuseDescriptionError:!0,maxAbuseDescription:s.MAX_COMMENT,errorSendAbuse:void 0,successText:void 0}},computed:{...c(m,["commentUser"])},methods:{...b(m,["setCommentUser"]),async reportAbuse(){this.commentUser?.name||this.setCommentUser(this.name??"");try{const e={commentId:this.comment?.commentId,description:this.abuseDescription,uuid:this.commentUser?.uuid},t=await h.postData({api:2,path:"abuse/",dataToSend:e});this.$emit("update:comment",{...this.comment,abuse:t.abuseCount}),this.successText=this.$t("Thank you for reporting abuse")}catch{this.errorSendAbuse=this.$t("Error occurs while post your comment...")}}}});function M(e,t,N,T,U,V){const r=a("ClassicInputText"),p=a("RecaptchaModal");return n(),i(p,{"id-modal":"report-abuse-modal","title-modal":e.$t("Report abuse"),"disable-validate":e.errorName||e.abuseDescriptionError,"error-text":e.errorSendAbuse,"success-text":e.successText,onClose:t[4]||(t[4]=o=>e.$emit("close")),onValidate:e.reportAbuse},{form:C(()=>[e.commentUser?.name?A("",!0):(n(),i(r,{key:0,"text-init":e.name,"onUpdate:textInit":t[0]||(t[0]=o=>e.name=o),errorVariable:e.errorName,"onUpdate:errorVariable":t[1]||(t[1]=o=>e.errorName=o),"input-id":"comment-user-name",label:e.$t("Let's get acquainted :"),"max-length":e.maxName,placeholder:e.$t("Your name")},null,8,["text-init","errorVariable","label","max-length","placeholder"])),$(r,{"text-init":e.abuseDescription,"onUpdate:textInit":t[2]||(t[2]=o=>e.abuseDescription=o),errorVariable:e.abuseDescriptionError,"onUpdate:errorVariable":t[3]||(t[3]=o=>e.abuseDescriptionError=o),"is-textarea":!0,"input-id":"abuse-description",label:e.$t("Describe the reason for the report"),"max-length":e.maxAbuseDescription,focus:!0},null,8,["text-init","errorVariable","label","max-length"])]),_:1},8,["title-modal","disable-validate","error-text","success-text","onValidate"])}const k=f(D,[["render",M]]);export{k as default};
