import{o as l}from"./orgaComputed-ovvKvHgW.js";import{d as p,k as h,p as u,_ as f,r as g,x as E,o as t,c as n,g as y,w as a,y as v,f as i,i as r,h as m,t as d,e as k}from"./index.js";import{d as I}from"./displayMethods-CzaGbBDz.js";const _=p({name:"EmissionItem",mixins:[I,l,h],props:{emission:{default:()=>({}),type:Object}},data(){return{activeEmission:!0}},computed:{organisation(){return this.emission?.publisher?.organisation?.name??""},editRight(){return this.isEditRights(this.emission.orga.id)}},created(){this.editRight&&this.hasPodcast()},mounted(){const s=this.$refs.descriptionEmission,e=this.$refs.descriptionEmissionContainer;s!==null&&e!==null&&s.clientHeight>e.clientHeight&&e.classList.add("after-emission-description")},methods:{async hasPodcast(){(await u.fetchData({api:0,path:"podcast/search",parameters:{emissionId:this.emission.emissionId,first:0,size:0,includeStatus:["READY","PROCESSING"]},specialTreatement:!0})).count===0&&(this.activeEmission=!1)}}}),$={class:"mt-3 emission-item-container"},w=["title","alt"],C={class:"emission-item-text"},D={class:"d-flex align-items-center emission-name"},P=["title"],R={ref:"descriptionEmissionContainer",class:"emission-description htms-wysiwyg-content"},N=["innerHTML"];function B(s,e,H,O,S,T){const o=g("router-link"),c=E("lazy");return t(),n("div",$,[y(o,{to:{name:"emission",params:{emissionId:s.emission.emissionId},query:{productor:s.filterOrgaId}},title:s.$t("Emission"),class:"d-flex flex-grow-1 text-dark"},{default:a(()=>[v(i("img",{width:"250",height:"250",class:"img-box",title:s.$t("Emission name image",{name:s.emission.name}),alt:s.$t("Emission name image",{name:s.emission.name})},null,8,w),[[c,s.proxyImageUrl(s.emission.imageUrl,"250")]]),i("div",C,[i("div",D,[!s.activeEmission&&!s.isPodcastmaker&&s.editRight?(t(),n("span",{key:0,title:s.$t("Emission have not podcasts"),class:"saooti-warning text-danger me-1"},null,8,P)):r("",!0),m(" "+d(s.emission.name),1)]),i("div",R,[i("div",{ref:"descriptionEmission",innerHTML:s.urlify(s.emission.description||"")},null,8,N)],512),s.isPodcastmaker?r("",!0):(t(),k(o,{key:0,class:"text-dark mt-auto",to:{name:"productor",params:{productorId:s.emission.orga.id},query:{productor:s.filterOrgaId}}},{default:a(()=>[m(" Â© "+d(s.emission.orga.name),1)]),_:1},8,["to"]))])]),_:1},8,["to","title"])])}const A=f(_,[["render",B]]);export{A as default};
