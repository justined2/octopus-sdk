const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ShareModalPlayer-DPQuT6R4.js","assets/SnackBar-BYGi5e7s.js","assets/index.js","assets/index.css","assets/SnackBar-BAfrY8QD.css","assets/displayMethods-CzaGbBDz.js","assets/ClassicModal-mpJgF1dy.js","assets/ClassicModal-D0ckngeT.css","assets/ClassicNav-D0TBoB16.js","assets/ClassicNav-DagbBG07.css","assets/QrCode-CaQdB7x0.js","assets/ClassicCheckbox-ChwDZ1Xu.js","assets/ClassicCheckbox-3MIQ8tmA.css","assets/ShareModalPlayer-Co-QiMKE.css","assets/PlayerParameters-YJfCdkqK.js","assets/PlayerParameters-BGo14IA1.css","assets/PlayerCommonParameters-CQ30jHZk.js","assets/SharePlayerTypes-CtR7aSOb.js","assets/SharePlayerColors-CVZjnTey.js","assets/style-sAP9lhUx.js","assets/style-CR8nY6_o.css"])))=>i.map(i=>d[i]);
import{d as P,m as u,D as A,l as C,n as E,a7 as F,q as r,v as o,_ as I,r as a,o as t,c as l,f as d,t as n,i as p,g as h,e as m}from"./index.js";const S=r(()=>o(()=>import("./ShareModalPlayer-DPQuT6R4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),M=r(()=>o(()=>import("./PlayerParameters-YJfCdkqK.js"),__vite__mapDeps([14,11,2,3,12,15]))),T=r(()=>o(()=>import("./PlayerCommonParameters-CQ30jHZk.js"),__vite__mapDeps([16,11,2,3,12]))),w=r(()=>o(()=>import("./SharePlayerTypes-CtR7aSOb.js"),__vite__mapDeps([17,2,3]))),O=r(()=>o(()=>import("./SharePlayerColors-CVZjnTey.js"),__vite__mapDeps([18,19,2,3,20]))),k=r(()=>o(()=>import("./ClassicCheckbox-ChwDZ1Xu.js"),__vite__mapDeps([11,2,3,12]))),$=P({components:{ShareModalPlayer:S,SharePlayerColors:O,PlayerParameters:M,SharePlayerTypes:w,ClassicCheckbox:k,PlayerCommonParameters:T},props:{podcast:{default:void 0,type:Object},emission:{default:void 0,type:Object},playlist:{default:void 0,type:Object},organisationId:{default:void 0,type:String},isEducation:{default:!1,type:Boolean},exclusive:{default:!1,type:Boolean},notExclusive:{default:!0,type:Boolean}},data(){return{typeCustomPlayer:"",iFrameModel:"default",isShareModal:!1,color:"#40a372",theme:"#000000",proceedReading:!0,episodeNumbers:"number",iFrameNumber:"3",isVisible:!1,displayArticle:!0,displayTranscript:!0,displayWave:!1,playerAutoPlay:!1,orgaAttributes:void 0,insertCode:!1}},computed:{...u(A,["authOrgaId"]),...u(C,["miniplayerUrl"]),authenticated(){return this.authOrgaId!==void 0},displayWaveParam(){return this.iFrameModel==="default"||this.iFrameModel==="emission"},choseNumberEpisodes(){return this.displayChoiceAllEpisodes||this.isTypeSuggestion},displayArticleParam(){return this.podcast!==void 0&&this.podcast.article!==void 0&&this.podcast.article.length!==0&&(this.iFrameModel==="default"||this.iFrameModel==="large"||this.iFrameModel==="largeMore")},displayInsertCode(){let e="";return this.podcast&&(e=this.podcast.organisation.id),this.emission&&(e=this.emission.orga.id),this.playlist&&(e=this.playlist.organisation?.id??""),e===this.authOrgaId},displayTranscriptParam(){return this.isTranscriptionAuthorize&&(this.isDefault||this.isEmission)},isTranscriptionAuthorize(){return this.orgaAttributes&&this.orgaAttributes&&Object.hasOwn(this.orgaAttributes,"speechtotext.active")?this.orgaAttributes["speechtotext.active"]:!1},displayChoiceAllEpisodes(){return!this.podcast||this.isTypeEmission},isDefault(){return this.iFrameModel==="default"},isEmission(){return this.iFrameModel==="emission"},isLargeEmission(){return this.iFrameModel==="emissionLarge"},isTypeSuggestion(){return this.iFrameModel==="largeSuggestion"||this.typeCustomPlayer==="SUGGESTION"},isTypeEmission(){return this.isEmission||this.isLargeEmission||this.typeCustomPlayer==="EMISSION"},titleStillAvailable(){return this.isPodcastNotVisible?this.$t("Podcast still available"):this.$t("Podcasts still available")},isLiveReadyToRecord(){return this.podcast?this.podcast.conferenceId!==void 0&&this.podcast.conferenceId!==0&&this.podcast.processingStatus==="READY_TO_RECORD":!1},noAd(){return this.podcast?.organisation.id!==this.organisationId&&this.podcast?.monetisable==="NO"||this.podcast?.monetisable==="UNDEFINED"&&this.podcast?.emission.monetisable==="NO"},iFrameSrc(){if(this.iFrameModel==="video")return"https://www.ultimedia.com/deliver/generic/iframe/mdtk/01009833/zone/1/showtitle/1/src/"+this.podcast?.video?.videoId+"/sound/true";let e=[""],i=this.displayChoiceAllEpisodes&&this.episodeNumbers==="all"?"/0":"/"+this.iFrameNumber;return e.push(`${this.miniplayerUrl}miniplayer/`),!this.podcast&&!this.playlist&&this.emission?e=this.constructEmissionUrl(e):this.playlist?e=this.constructPlaylistUrl(e):this.emission&&this.podcast&&(e.push(`${this.iFrameModel}/`),this.isTypeEmission?e.push(`${this.emission.emissionId}${i}/${this.podcast.podcastId}`):this.isTypeSuggestion?e.push(`${this.podcast.podcastId}${i}`):e.push(`${this.podcast.podcastId}`)),this.addUrlParameters(e).join("")},iFrameHeight(){switch(this.iFrameModel){case"video":return"281px";case"large":return this.podcast?"140px":"350px";case"largeMore":return"210px";case"emissionLarge":case"largeSuggestion":return"350px";case"emission":return"520px";case"videoLive":return"450px";default:return"530px"}},iFrame(){const e=this.podcast?.video?.videoId?'allowfullscreen="true" referrerpolicy="no-referrer-when-downgrade"':"";return`<iframe src="${this.iFrameSrc}" width="100%" height="${this.iFrameHeight}" scrolling="no" frameborder="0" ${e} allow="clipboard-read; clipboard-write; autoplay"></iframe>`},isPodcastNotVisible(){return this.podcast!==void 0&&!this.podcast.availability.visibility&&(this.iFrameModel==="default"||this.iFrameModel==="large")},dataTitle(){return this.podcast?this.podcast.podcastId:this.emission?this.emission.emissionId:this.playlist?this.playlist.playlistId:0}},created(){this.initSharePlayer()},methods:{...E(F,["getOrgaAttributes"]),async initSharePlayer(){this.orgaAttributes=await this.getOrgaAttributes(this.authOrgaId??""),this.initColor(),this.isLiveReadyToRecord&&(this.iFrameModel="large"),this.podcast?.annotations?.fromTTS==="true"&&(this.displayTranscript=!1)},getIframeNumber(){return this.displayChoiceAllEpisodes&&this.episodeNumbers==="all"?"/0":"/"+this.iFrameNumber},constructEmissionUrl(e){if(!this.emission)return[];switch(this.iFrameModel){case"default":e.push("emission");break;case"large":e.push("emissionLarge");break;default:e.push(`${this.iFrameModel}`);break}return e.push(`/${this.emission.emissionId}${this.getIframeNumber()}`),e},constructPlaylistUrl(e){if(!this.playlist)return[];switch(this.iFrameModel){case"default":e.push("playlist");break;case"large":e.push("playlistLarge");break;default:e.push(`${this.iFrameModel}`);break}return e.push(`/${this.playlist.playlistId}`),e},addUrlParameters(e){return e.push("?distributorId="+this.organisationId),e.push(`&color=${this.color.substring(1)}&theme=${this.theme.substring(1)}`),this.proceedReading||e.push("&proceed=false"),!this.displayArticle&&this.displayArticleParam&&e.push("&article=false"),this.displayTranscript||e.push("&transcript=false"),this.displayWave||e.push("&wave=false"),this.playerAutoPlay&&e.push("&autoplay=true"),this.isVisible&&e.push("&key="+window.btoa(this.dataTitle.toString())),this.insertCode&&e.push("&insertCode=true"),e},initColor(){this.orgaAttributes&&(this.color=Object.hasOwn(this.orgaAttributes,"COLOR")?this.orgaAttributes.COLOR:"#40a372",this.theme=Object.hasOwn(this.orgaAttributes,"THEME")?this.orgaAttributes.THEME:"#000000")}}}),N={class:"module-box overflow-visible"},R={class:"d-flex justify-content-between align-items-center"},U={class:"mb-3"},V=["title"],L={key:0,class:"d-flex"},D=["src","height"],j={class:"d-flex flex-column flex-grow-1"},B={key:1},W={key:2};function H(e,i,z,G,Y,q){const y=a("SharePlayerTypes"),c=a("SharePlayerColors"),f=a("ClassicCheckbox"),b=a("PlayerParameters"),g=a("PlayerCommonParameters"),v=a("ShareModalPlayer");return t(),l("div",N,[d("div",R,[d("h2",U,n(e.$t("Embed")),1),e.noAd&&!e.isEducation?(t(),l("div",{key:0,class:"sticker",title:e.$t("You cannot insert advertising")},n(e.$t("No advertising")),9,V)):p("",!0)]),!e.exclusive&&(e.authenticated||e.notExclusive)?(t(),l("div",L,[d("iframe",{id:"miniplayerIframe",title:"miniplayer",allowfullscreen:"true",allow:"clipboard-read; clipboard-write; autoplay",referrerpolicy:"no-referrer-when-downgrade",src:e.iFrameSrc,width:"100%",height:e.iFrameHeight,class:"max-iframe mx-3"},null,8,D),d("div",j,[h(y,{iFrameModel:e.iFrameModel,"onUpdate:iFrameModel":i[0]||(i[0]=s=>e.iFrameModel=s),typeCustomPlayer:e.typeCustomPlayer,"onUpdate:typeCustomPlayer":i[1]||(i[1]=s=>e.typeCustomPlayer=s),podcast:e.podcast,emission:e.emission,playlist:e.playlist,"organisation-id":e.organisationId,"is-live":e.isLiveReadyToRecord},null,8,["iFrameModel","typeCustomPlayer","podcast","emission","playlist","organisation-id","is-live"]),h(c,{color:e.color,"onUpdate:color":i[2]||(i[2]=s=>e.color=s),theme:e.theme,"onUpdate:theme":i[3]||(i[3]=s=>e.theme=s),class:"mt-3"},null,8,["color","theme"]),e.isPodcastNotVisible||e.playlist?(t(),m(f,{key:0,textInit:e.isVisible,"onUpdate:textInit":i[4]||(i[4]=s=>e.isVisible=s),"id-checkbox":"is-visible-checkbox",label:e.titleStillAvailable},null,8,["textInit","label"])):p("",!0),h(b,{"display-article":e.displayArticle,"onUpdate:displayArticle":i[5]||(i[5]=s=>e.displayArticle=s),"display-transcript":e.displayTranscript,"onUpdate:displayTranscript":i[6]||(i[6]=s=>e.displayTranscript=s),"display-wave":e.displayWave,"onUpdate:displayWave":i[7]||(i[7]=s=>e.displayWave=s),"proceed-reading":e.proceedReading,"onUpdate:proceedReading":i[8]||(i[8]=s=>e.proceedReading=s),"is-visible":e.isVisible,"onUpdate:isVisible":i[9]||(i[9]=s=>e.isVisible=s),"player-auto-play":e.playerAutoPlay,"onUpdate:playerAutoPlay":i[10]||(i[10]=s=>e.playerAutoPlay=s),"chose-number-episode":e.choseNumberEpisodes,"display-choice-all-episodes":e.displayChoiceAllEpisodes,"display-transcript-param":e.displayTranscriptParam,"display-article-param":e.displayArticleParam,"display-wave-param":e.displayWaveParam,onIFrameNumber:i[11]||(i[11]=s=>e.iFrameNumber=s),onEpisodeNumbers:i[12]||(i[12]=s=>e.episodeNumbers=s)},null,8,["display-article","display-transcript","display-wave","proceed-reading","is-visible","player-auto-play","chose-number-episode","display-choice-all-episodes","display-transcript-param","display-article-param","display-wave-param"]),e.displayInsertCode?(t(),m(g,{key:1,insertCode:e.insertCode,"onUpdate:insertCode":i[13]||(i[13]=s=>e.insertCode=s)},null,8,["insertCode"])):p("",!0),e.isShareModal?(t(),m(v,{key:2,"embed-link":e.iFrame,"embedly-link":e.iFrameSrc,"direct-link":e.podcast,onClose:i[14]||(i[14]=s=>e.isShareModal=!1)},null,8,["embed-link","embedly-link","direct-link"])):p("",!0),d("button",{class:"btn btn-primary width-fit-content mt-3",onClick:i[15]||(i[15]=s=>e.isShareModal=!0)},n(e.$t("Share the player")),1)])])):e.exclusive&&e.authenticated?(t(),l("div",B,n(e.$t("Only organisation members can share the content")),1)):e.authenticated?p("",!0):(t(),l("div",W,n(e.$t("Only authenticated members can share the content")),1))])}const K=I($,[["render",H]]);export{K as default};
